# 
# OSS-7 - An opensource implementation of the DASH7 Alliance Protocol for ultra
# lowpower wireless sensor communication
#
# Copyright 2015 University of Antwerp
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

#Make sure that the HAL interface is reacheable by the entire source tree
EXPORT_GLOBAL_INCLUDE_DIRECTORIES(inc)

#Export the 'binary' platform directory so the 'hal_defs.h' file
#generated by HAL_BUILD_SETTINGS file can be found
EXPORT_GLOBAL_INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})

#include hal-specific helper MACRO's
include(${PROJECT_SOURCE_DIR}/cmake/hal_macros.cmake)

# HAL parameters (might be forcefully overruled by chip, which is why HAL_HEADER_DEFINE() is only called after adding chips)
SET(HAL_RADIO_USE_HW_CRC "FALSE" CACHE BOOL "Enable/Disable the use of HW CRC")
SET(HAL_UART_USE_DMA_TX "FALSE" CACHE BOOL "Enable/Disable the use of DMA for UART TX")
SET(HAL_SUPPORT_HW_AES "FALSE" CACHE BOOL "Indicates whether an hardware accelerated module is present for AES")

#note: this does not include any chip code. 
#see note in 'chips' directory in the CMakeLists.txt in the 'chips' directory
ADD_SUBDIRECTORY("chips")

# add platforms
ADD_SUBDIRECTORY("platforms")

#Generate the 'hal_defs.h'
HAL_HEADER_DEFINE(BOOL HAL_RADIO_INCLUDE_TIMESTAMP)
HAL_HEADER_DEFINE(BOOL HAL_RADIO_USE_HW_CRC)
HAL_HEADER_DEFINE(BOOL HAL_UART_USE_DMA_TX)
HAL_HEADER_DEFINE(BOOL HAL_SUPPORT_HW_AES)
HAL_BUILD_SETTINGS_FILE()


